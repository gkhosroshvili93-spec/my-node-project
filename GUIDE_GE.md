# ავტორიზაციის სისტემის სახელმძღვანელო

ეს დოკუმენტი აღწერს თქვენს Node.js პროექტში დანერგილ ავტორიზაციის სისტემას.

## 1. რეგისტრაცია და 2FA დაყენება

- მომხმარებელი შედის `/register` გვერდზე.
- ავსებს ელ.ფოსტას და პაროლს (პაროლი: მინიმუმ 8 სიმბოლო, 1 ასო, 1 ციფრი).
- რეგისტრაციის ღილაკზე დაჭერისას:
  1. სისტემა ქმნის მომხმარებელს.
  2. მომხმარებელი ავტომატურად გადადის **2FA-ს დაყენების გვერდზე** (`/setup-2fa`).
  3. ეკრანზე გამოდის QR კოდი, რომელიც უნდა დასკანერდეს Google Authenticator აპლიკაციით.
  4. კოდის შეყვანის შემდეგ, 2FA აქტიურდება და მომხმარებელი შედის სისტემაში (`/dashboard`).

## 2. შესვლა (Login)

- მომხმარებელი შედის ელ.ფოსტით და პაროლით (+ Captcha).
- სისტემა ამოწმებს პაროლს.
- თუ პაროლი სწორია:
  - თუ 2FA უკვე დაყენებულია -> გადადის კოდის შემოწმებაზე (`/verify-2fa`).
  - თუ 2FA ჯერ არ არის დაყენებული -> პირდაპირ შედის სისტემაში (`/dashboard`).

## 3. Google Authenticator (2FA)

- სისტემა იყენებს `otplib` ბიბლიოთეკას დროებითი კოდების გენერაციისთვის.
- **რატომ არის ეს კარგი?** პაროლის გატეხვის შემთხვევაშიც კი, ჰაკერი ვერ შევა სისტემაში თქვენი ტელეფონის გარეშე.

## ტექნიკური დეტალები

- **ბიბლიოთეკები**: `bcryptjs` (პაროლის ჰეშირებისთვის), `otplib` (2FA-სთვის), `qrcode` (სურათის გენერაციისთვის).
- **მონაცემთა ბაზა**: ფაილური სისტემა (`users.json`).
- **უსაფრთხოება**: Rate Limiter (ბრუტფორსისგან დაცვა), პაროლის სირთულის კონტროლი, სესიების დაცვა.
